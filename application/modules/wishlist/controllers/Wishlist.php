<?phpif (!defined('BASEPATH'))    exit('No direct script access allowed');class Wishlist extends CMS_Controller {    function __construct() {        parent::__construct();        $this->load->model('Wishlistmodel');    }    function index() {        $userDetails = $this->flexi_auth->get_user_custom_data();        $user_id = $userDetails["uacc_id"];        $wishlist = $this->Wishlistmodel->listAll($user_id);        $inner = array();        $inner['INFO'] = (!isset($inner['INFO'])) ?                $this->session->flashdata('message') : $inner['INFO'];        $inner['wishlist'] = $wishlist;        $shell = array();        $shell['contents'] = $this->load->view("wishlist-index", $inner, true);        $this->load->view("themes/" . THEME . "/templates/default-subpage", $shell);    }    function add() {        $this->load->library('form_validation');        $userDetails = $this->flexi_auth->get_user_custom_data();        $user_id = $userDetails["uacc_id"];        $this->form_validation->set_rules('product_id', 'Product', 'trim|required|is_unique[user_accounts.uacc_username]');        if ($this->form_validation->run() == false) {            echo json_encode(array('response' => false, 'msg' => validation_errors()));        } else {            if ($this->Wishlistmodel->insertRecord($user_id)) {                echo json_encode(array('response' => true, 'msg' => 'Product Added to wishlist'));            } else {                echo json_encode(array('response' => true, 'msg' => 'Product already in wishlist'));            }        }    }    function delete($pid = 0) {        $userDetails = $this->flexi_auth->get_user_custom_data();        $user_id = $userDetails["uacc_id"];        if (!$pid) {            redirect('wishlist');        }        $this->Wishlistmodel->deleteRecord($user_id, $pid);        $this->session->set_flashdata('message', 'Product deleted from wishlist!');        redirect('wishlist');    }}